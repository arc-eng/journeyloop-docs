{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"JourneyLoop Docs","text":"<p>Internal documentation for the JourneyLoop platform.</p>"},{"location":"companion/","title":"Companion","text":"<p>Documentation for the AI companion feature \u2014 architecture, API, CLI, and operator infrastructure.</p>"},{"location":"companion/api-reference/","title":"Companion API","text":"<p>API reference for the JourneyLoop companion backend. All endpoints live under <code>/api/v1/companion/</code> and require authentication via the existing Django session/token auth.</p>"},{"location":"companion/api-reference/#chat","title":"Chat","text":""},{"location":"companion/api-reference/#post-apiv1companionchat","title":"POST /api/v1/companion/chat/","text":"<p>Send a message to the companion. Returns 202 (processing) \u2014 the actual response arrives via SSE.</p> <p>Request:</p> <pre><code>{\n  \"message\": \"How did my session with Marcus go?\",\n  \"interaction_response\": null\n}\n</code></pre> <p>Fields:</p> <ul> <li><code>message</code> (string) \u2014 Coach's text input</li> <li><code>interaction_response</code> (object, optional) \u2014 Response to a scaffolded micro-interaction (multiple choice, yes/no, quick capture)</li> </ul> <p>Response:</p> <pre><code>{\n  \"status\": \"processing\",\n  \"job_id\": \"rq-job-uuid\"\n}\n</code></pre> <p>Flow: Message is enqueued via django-rq \u2192 prompt assembler builds context (personality + skills + memory) \u2192 LLM generates <code>CompanionResponse</code> \u2192 response router publishes to SSE channels.</p>"},{"location":"companion/api-reference/#sse-event-stream","title":"SSE Event Stream","text":""},{"location":"companion/api-reference/#get-apiv1companionevents","title":"GET /api/v1/companion/events/","text":"<p>Server-Sent Events stream for real-time panel updates. Uses django-eventstream. Each coach gets their own channel (<code>companion-{coach_id}</code>).</p> <p>Event types:</p> Event Target Description <code>chat-message</code> Chat panel Companion's conversational reply <code>main-update</code> Main panel Rich content push (prep cards, summaries, timelines) <code>secondary-update</code> Secondary panel Supporting context (stats, schedule, related info) <code>notification</code> Overlay Time-sensitive alert (8s auto-dismiss) <p>Each event payload:</p> <pre><code>{\n  \"html\": \"&lt;rendered HTML fragment&gt;\"\n}\n</code></pre> <p>Panels are HTMX-wired to swap content on the matching SSE event type.</p>"},{"location":"companion/api-reference/#panels","title":"Panels","text":""},{"location":"companion/api-reference/#get-apiv1companionpanelspanel","title":"GET /api/v1/companion/panels/{panel}/","text":"<p>Fetch current panel content (for initial page load or manual refresh).</p> <p>Parameters:</p> <ul> <li><code>panel</code> \u2014 <code>main</code> or <code>secondary</code></li> </ul> <p>Response:</p> <pre><code>{\n  \"html\": \"&lt;rendered HTML fragment&gt;\"\n}\n</code></pre>"},{"location":"companion/api-reference/#personality","title":"Personality","text":""},{"location":"companion/api-reference/#get-apiv1companionpersonality","title":"GET /api/v1/companion/personality/","text":"<p>Returns the companion's personality layer status (not raw content \u2014 the companion narrates its own state).</p> <p>Response:</p> <pre><code>{\n  \"bootstrap_status\": \"complete\",\n  \"capabilities_unlocked\": true,\n  \"layers\": {\n    \"soul\": { \"is_set\": true, \"version\": 3, \"token_estimate\": 450 },\n    \"identity\": { \"is_set\": true, \"version\": 2, \"token_estimate\": 180 },\n    \"coach_knowledge\": { \"is_set\": true, \"version\": 8, \"token_estimate\": 1200 },\n    \"instructions\": { \"is_set\": true, \"version\": 1, \"token_estimate\": 600 },\n    \"environment\": { \"is_set\": false, \"version\": 0, \"token_estimate\": 0 },\n    \"client_persona\": { \"is_set\": false, \"version\": 0, \"token_estimate\": 0 }\n  },\n  \"total_tokens\": 2430,\n  \"token_budget\": 8500\n}\n</code></pre> <p>Note: Coaches never see raw layer content. This endpoint is for internal monitoring and test agents. The companion narrates its own personality state conversationally.</p>"},{"location":"companion/api-reference/#skills","title":"Skills","text":""},{"location":"companion/api-reference/#get-apiv1companionskills","title":"GET /api/v1/companion/skills/","text":"<p>List all active skills for the current coach.</p> <p>Query parameters:</p> <ul> <li><code>trigger</code> (optional) \u2014 Filter by trigger event (e.g., <code>session_approaching</code>, <code>session_complete</code>, <code>on_demand</code>)</li> </ul> <p>Response:</p> <pre><code>{\n  \"skills\": [\n    {\n      \"slug\": \"session-prep\",\n      \"name\": \"Session Prep\",\n      \"skill_type\": \"default\",\n      \"trigger_events\": [\"session_approaching\"],\n      \"token_estimate\": 380,\n      \"version\": 1,\n      \"is_customized\": false\n    },\n    {\n      \"slug\": \"post-session-debrief\",\n      \"name\": \"Post-Session Debrief\",\n      \"skill_type\": \"custom\",\n      \"trigger_events\": [\"session_complete\"],\n      \"token_estimate\": 420,\n      \"version\": 3,\n      \"is_customized\": true,\n      \"parent_slug\": \"post-session-debrief\"\n    }\n  ],\n  \"total_tokens\": 800,\n  \"max_context_tokens\": 8000\n}\n</code></pre>"},{"location":"companion/api-reference/#get-apiv1companionskillsactive","title":"GET /api/v1/companion/skills/active/","text":"<p>Returns skills that would load for a specific trigger event.</p> <p>Query parameters:</p> <ul> <li><code>trigger</code> (required) \u2014 Trigger event name</li> <li><code>coach_id</code> (optional) \u2014 For test agents</li> </ul> <p>Response: Same shape as <code>/skills/</code> but filtered to matching triggers with coach overrides applied.</p>"},{"location":"companion/api-reference/#schedules","title":"Schedules","text":""},{"location":"companion/api-reference/#get-apiv1companionschedules","title":"GET /api/v1/companion/schedules/","text":"<p>List active schedules for the current coach.</p> <p>Response:</p> <pre><code>{\n  \"schedules\": [\n    {\n      \"id\": 1,\n      \"name\": \"Sunday evening reflection\",\n      \"schedule_type\": \"recurring\",\n      \"cron_expression\": \"0 19 * * 0\",\n      \"delivery_channel\": \"message\",\n      \"is_paused\": false,\n      \"last_triggered_at\": \"2026-02-16T19:00:00Z\",\n      \"next_trigger_at\": \"2026-02-23T19:00:00Z\"\n    }\n  ]\n}\n</code></pre>"},{"location":"companion/api-reference/#get-apiv1companionschedulesidexecutions","title":"GET /api/v1/companion/schedules/{id}/executions/","text":"<p>Audit log for a specific schedule.</p> <p>Response:</p> <pre><code>{\n  \"executions\": [\n    {\n      \"triggered_at\": \"2026-02-16T19:00:00Z\",\n      \"status\": \"success\",\n      \"output_summary\": \"Weekly reflection based on 3 sessions...\"\n    }\n  ]\n}\n</code></pre>"},{"location":"companion/api-reference/#memory","title":"Memory","text":""},{"location":"companion/api-reference/#get-apiv1companionmemory","title":"GET /api/v1/companion/memory/","text":"<p>Returns memory stats and recent entries (for monitoring and test agents).</p> <p>Query parameters:</p> <ul> <li><code>layer</code> (optional) \u2014 <code>coach_profile</code>, <code>client_knowledge</code>, <code>session_intelligence</code></li> <li><code>client_id</code> (optional) \u2014 Filter client knowledge by client</li> </ul> <p>Response:</p> <pre><code>{\n  \"stats\": {\n    \"coach_profile_entries\": 45,\n    \"client_knowledge_entries\": 120,\n    \"session_intelligence_entries\": 89\n  },\n  \"recent\": [\n    {\n      \"layer\": \"session_intelligence\",\n      \"session_id\": 24,\n      \"summary\": \"Marcus brought up compensation directly...\",\n      \"created_at\": \"2026-02-19T14:30:00Z\"\n    }\n  ]\n}\n</code></pre>"},{"location":"companion/api-reference/#context","title":"Context","text":""},{"location":"companion/api-reference/#get-apiv1companioncontext","title":"GET /api/v1/companion/context/","text":"<p>Returns the companion's current UI context state.</p> <p>Response:</p> <pre><code>{\n  \"mode\": \"pre_session\",\n  \"active_client\": {\n    \"id\": 5,\n    \"name\": \"Marcus Chen\"\n  },\n  \"updated_at\": \"2026-02-19T13:40:00Z\"\n}\n</code></pre>"},{"location":"companion/api-reference/#post-apiv1companioncontext","title":"POST /api/v1/companion/context/","text":"<p>Force a context transition (for testing). Production transitions are event-driven.</p> <p>Request:</p> <pre><code>{\n  \"mode\": \"post_session\",\n  \"client_id\": 5\n}\n</code></pre>"},{"location":"companion/api-reference/#response-schema","title":"Response Schema","text":"<p>All companion LLM responses use the <code>CompanionResponse</code> structured output schema:</p> <pre><code>class CompanionResponse(BaseModel):\n    chat_message: str                          # Conversational reply (always present)\n    panel_updates: list[PanelDirective] = []   # Content pushes to Main/Secondary\n    notification: Optional[str] = None         # Time-sensitive overlay text\n    context_hint: Optional[str] = None         # Context mode transition hint\n    personality_updates: list[PersonalityUpdate] = []  # Self-modification\n    skill_updates: list[SkillUpdate] = []      # Skill CRUD\n    schedule_updates: list[ScheduleUpdate] = [] # Schedule CRUD\n</code></pre> <p>The response router processes each field: chat message \u2192 SSE, panel updates \u2192 rendered HTML \u2192 SSE, personality/skill/schedule updates \u2192 DB writes.</p>"},{"location":"companion/api-reference/#authentication","title":"Authentication","text":"<p>All endpoints require Django session auth or token auth (existing portal authentication). No separate API keys \u2014 the companion API inherits the portal's auth system.</p>"},{"location":"companion/api-reference/#error-handling","title":"Error Handling","text":"<p>Standard Django REST Framework error responses:</p> <ul> <li><code>401</code> \u2014 Not authenticated</li> <li><code>403</code> \u2014 Not authorized (e.g., accessing another coach's companion)</li> <li><code>404</code> \u2014 Resource not found</li> <li><code>422</code> \u2014 Validation error (e.g., skill exceeds token budget)</li> <li><code>500</code> \u2014 Internal server error</li> </ul>"},{"location":"companion/operator/","title":"Companion Operator Guide","text":"<p>How the companion is provisioned, architected, and deployed within the JourneyLoop platform.</p>"},{"location":"companion/operator/#architecture-overview","title":"Architecture Overview","text":"<p>The companion is a Django app (<code>companion/</code>) inside the existing JourneyLoop project. It shares the database, auth system, and infrastructure with the existing portal \u2014 but its AI layer is fully greenfield.</p> <pre><code>journeyloop/\n  coaching/              # Existing \u2014 session recording, client management\n  calendar_integration/  # Existing \u2014 Google Calendar, Recall.ai\n  payments/              # Existing \u2014 Stripe subscriptions\n  client_portal/         # Existing \u2014 client-facing views\n  companion/             # NEW \u2014 companion app\n    models/\n      memory.py          # CompanionMemory, SessionIntelligence, ClientKnowledge\n      skills.py          # CompanionSkill\n      personality.py     # CompanionPersonality, CompanionState\n      scheduling.py      # CompanionSchedule, ScheduleExecution\n      context.py         # CompanionContext\n      interactions.py    # MicroInteraction\n    engine/\n      prompt_assembler.py  # Personality + skills + memory \u2192 system prompt\n      router.py            # LLM response \u2192 panel routing via SSE\n      capabilities.py      # Capability gating (bootstrap state)\n      personality.py       # Self-modification logic\n      skills.py            # Skill loading, creation, retirement\n    scheduling/\n      engine.py          # APScheduler polling job\n      hooks.py           # Session event hooks\n      executor.py        # Scheduled action execution\n      delivery.py        # Email / in-app delivery\n    api/\n      views.py           # REST endpoints\n      events.py          # SSE push helpers\n    templates/\n      companion/\n        page.html        # Main layout (golden ratio grid)\n        partials/        # HTMX fragments for each panel\n</code></pre>"},{"location":"companion/operator/#key-design-decisions","title":"Key Design Decisions","text":"Decision Choice Rationale Deployment Same Django project, new app Shared DB + auth. No API gateway complexity AI layer Fully greenfield Existing prompts don't fit companion model. No reuse of AICoach/SessionAnalyzer Frontend Server-rendered HTMX + SSE Already in stack. No SPA framework needed Real-time django-eventstream Already in stack. One SSE connection per coach Task queue django-rq Already in stack. Async message processing Structured output Pydantic-AI Already in stack. LLM returns typed CompanionResponse Token counting tiktoken Already in stack. Budget enforcement at save time"},{"location":"companion/operator/#provisioning-flow","title":"Provisioning Flow","text":""},{"location":"companion/operator/#new-coach-what-happens-at-signup","title":"New Coach \u2014 What Happens at Signup","text":"<ol> <li>Coach creates account (existing portal auth)</li> <li>First visit to <code>/companion/</code> triggers provisioning:<ul> <li><code>provision_personality(coach)</code> \u2014 creates 6 empty personality layer rows</li> <li><code>CompanionState</code> created with <code>bootstrap_status='not_started'</code></li> <li><code>CompanionContext</code> created with <code>mode='bootstrap'</code></li> </ul> </li> <li>Bootstrap begins \u2014 companion's system prompt includes bootstrap instructions</li> <li>Through conversation, companion fills soul, identity, and coach knowledge layers</li> <li>When all 3 MVP layers are set \u2192 <code>capabilities_unlocked = True</code>, <code>bootstrap_status = 'complete'</code></li> <li>Full capabilities unlock \u2014 session prep, client analysis, scheduling, proactive nudges</li> </ol>"},{"location":"companion/operator/#what-gets-created-per-coach","title":"What Gets Created Per Coach","text":"Model Count Purpose <code>CompanionPersonality</code> 6 rows One per layer (soul, identity, coach_knowledge, instructions, environment, client_persona) <code>CompanionState</code> 1 row Bootstrap status, capability flag <code>CompanionContext</code> 1 row Current UI context mode <code>CompanionSkill</code> 0 initially Coach-specific skills created through conversation (defaults are global) <code>CompanionSchedule</code> 0 initially Created when coach requests scheduled actions"},{"location":"companion/operator/#default-skills-global","title":"Default Skills (Global)","text":"<p>These ship with the platform (coach=null, available to all):</p> Skill Slug Trigger Session Prep <code>session-prep</code> <code>session_approaching</code> Post-Session Debrief <code>post-session-debrief</code> <code>session_complete</code> Hypothesis Check <code>hypothesis-check</code> <code>session_approaching</code>, <code>session_complete</code> Client Re-engagement <code>client-reengagement</code> <code>client_inactive</code> <p>Coaches customize these through conversation \u2192 creates a coach-scoped fork with <code>parent_skill</code> FK.</p>"},{"location":"companion/operator/#prompt-assembly-order","title":"Prompt Assembly Order","text":"<p>Every conversation turn, the prompt assembler builds the system prompt:</p> <pre><code>1. Personality layers (soul \u2192 identity \u2192 coach_knowledge \u2192 instructions \u2192 environment)\n2. Capability state (what the companion can/can't do)\n3. Active skills (matching the current trigger event)\n4. Memory context (relevant coach profile, client knowledge, session intelligence)\n5. Interface instructions (panel_updates, notifications, etc.)\n6. Conversation history\n</code></pre> <p>Token budgets:</p> <ul> <li>Personality: \u22648,500 tokens total (per-layer caps)</li> <li>Skills: \u22648,000 tokens total (\u22642,000 per skill)</li> <li>Memory: dynamic, based on relevance</li> </ul>"},{"location":"companion/operator/#data-model-relationships","title":"Data Model Relationships","text":"<pre><code>CoachingProfile (existing)\n  \u251c\u2500\u2500 CompanionPersonality (6 layers)\n  \u251c\u2500\u2500 CompanionState (1 row)\n  \u251c\u2500\u2500 CompanionContext (1 row)\n  \u251c\u2500\u2500 CompanionSkill (0-N coach-specific)\n  \u251c\u2500\u2500 CompanionSchedule (0-N)\n  \u2502     \u2514\u2500\u2500 ScheduleExecution (audit log)\n  \u251c\u2500\u2500 CompanionMemory (0-N)\n  \u2502     \u251c\u2500\u2500 CoachProfile entries\n  \u2502     \u2514\u2500\u2500 ClientKnowledge entries (scoped by client)\n  \u2514\u2500\u2500 SessionIntelligence (1 per session, via CoachingSession FK)\n</code></pre> <p>All companion models use <code>coach</code> FK to <code>CoachingProfile</code>. Data is fully isolated per coach.</p>"},{"location":"companion/operator/#migration-strategy","title":"Migration Strategy","text":"<p>Three phases, each independently rollbackable:</p>"},{"location":"companion/operator/#phase-1-foundation-weeks-14","title":"Phase 1: Foundation (Weeks 1\u20134)","text":"<ul> <li>Companion app scaffold + models + migrations</li> <li>Prompt assembler, chat API, SSE wiring</li> <li>Bootstrap flow, personality self-modification</li> <li>Menu item in portal UI</li> </ul>"},{"location":"companion/operator/#phase-2-intelligence-weeks-58","title":"Phase 2: Intelligence (Weeks 5\u20138)","text":"<ul> <li>Session Intelligence model (replaces regenerated analysis)</li> <li>Session Analyzer modification (writes to both old + new models)</li> <li>Client Knowledge, scheduling engine</li> <li>Proactive behavior (prep, follow-up)</li> </ul>"},{"location":"companion/operator/#phase-3-client-facing-weeks-912","title":"Phase 3: Client-Facing (Weeks 9\u201312)","text":"<ul> <li>Client portal companion integration</li> <li>Client-facing conversation API</li> <li>Automated client nudges</li> <li>Coach approval flow for client messages</li> </ul> <p>Rollback: Each phase adds tables/routes removable without affecting existing functionality. During Phase 2, the session analyzer writes to both old and new models in parallel.</p>"},{"location":"companion/operator/#infrastructure-requirements","title":"Infrastructure Requirements","text":"<p>No new infrastructure. The companion uses everything already in the stack:</p> <ul> <li>PostgreSQL \u2014 new tables in existing DB</li> <li>Redis \u2014 existing cache + RQ queue</li> <li>APScheduler \u2014 new 5-minute polling job added to existing <code>clock.py</code></li> <li>django-eventstream \u2014 new SSE channels for companion</li> <li>RQ workers \u2014 companion jobs on existing worker processes</li> <li>Heroku \u2014 same dynos, no new services</li> </ul>"},{"location":"companion/operator/#openclaw-integration-exploratory","title":"OpenClaw Integration (Exploratory)","text":"<p>Marco is exploring using OpenClaw as the agent infrastructure \u2014 one OpenClaw agent per coach:</p> <ul> <li>Each coach gets their own OpenClaw workspace (SOUL.md = personality, MEMORY.md = coach knowledge)</li> <li>Django communicates via OpenClaw's OpenResponses HTTP API (<code>POST /v1/responses</code>)</li> <li>SSE streaming from OpenClaw to Django to browser</li> <li>Strong agent isolation (separate workspaces, sessions, auth profiles)</li> </ul> <p>Status: Feasibility confirmed. Main gap is dynamic provisioning \u2014 OpenClaw requires config changes + gateway restart to add new agents.</p>"},{"location":"engineering/","title":"Engineering","text":"<p>Engineering process, architecture decisions, and team protocols.</p>"},{"location":"engineering/process/","title":"Engineering Process","text":"<p>How the JourneyLoop agent team manages issues, specs, and development workflow.</p>"},{"location":"engineering/process/#repos","title":"Repos","text":"Repo Purpose Short Ref <code>arc-eng/journeyloop</code> Django app (code) JL <code>arc-eng/journeyloop-startup-assistant</code> Planning, roadmap, specs JL-SA <code>arc-eng/journeyloop-docs</code> Documentation site JL-Docs"},{"location":"engineering/process/#planning-docs-one-folder-per-feature","title":"Planning Docs: One Folder Per Feature","text":"<p>Every feature gets a folder under its project namespace:</p> <pre><code>planning/&lt;project&gt;/&lt;feature&gt;/\n  brief.md          \u2190 Product spec: user stories, acceptance criteria\n  ux.md             \u2190 UX concept: layout, interaction, wireframes\n  tech-spec.md      \u2190 Technical architecture: system design, decisions\n</code></pre> <p>Not every feature needs every file. Backend-only features skip <code>ux.md</code>. Simple features might only need <code>brief.md</code>.</p> <p>Example:</p> <pre><code>planning/companion/\n  memory-system/\n    brief.md\n    tech-spec.md\n  interface/\n    brief.md\n    ux.md\n    tech-spec.md\n  skill-system/\n    brief.md\n    ux.md\n    tech-spec.md\n</code></pre>"},{"location":"engineering/process/#issues-one-per-feature","title":"Issues: One Per Feature","text":"<p>Each feature has one tracking issue in <code>arc-eng/journeyloop-startup-assistant</code>. The substance lives in the planning folder \u2014 the issue is lightweight.</p>"},{"location":"engineering/process/#issue-format","title":"Issue Format","text":"<pre><code>## [emoji] Feature Name\n\n**Planning:** `planning/&lt;project&gt;/&lt;feature&gt;/`\n\n| Vertical     | Status         |\n|-------------|----------------|\n| Product Spec | \u2705 Done / \ud83d\udd32 Not started / \u2796 N/A |\n| UX Concept   | \u2705 Done / \ud83d\udd32 Not started / \u2796 N/A |\n| Tech Spec    | \u2705 Done / \ud83d\udd32 Not started / \u2796 N/A |\n\n### Summary\nOne paragraph describing the feature and why it matters.\n</code></pre> <p>The status table is updated as verticals are completed.</p>"},{"location":"engineering/process/#lifecycle-feature-state-machine","title":"Lifecycle: Feature State Machine","text":"<p>Each feature issue carries exactly one lifecycle label at a time. The label answers: \"What does this feature need next?\"</p> <pre><code>[*] \u2192 needs-spec \u2192 needs-ux \u2192 needs-tech-spec \u2192 needs-review \u2192 ready-for-dev \u2192 [done]\n</code></pre>"},{"location":"engineering/process/#lifecycle-labels","title":"Lifecycle Labels","text":"Label Set By Means <code>needs-spec</code> \u2014 Feature needs a product spec (brief.md) <code>needs-ux</code> PM Brief done, needs UX concept <code>needs-tech-spec</code> PM/UX Ready for CTO to write tech-spec.md <code>needs-review</code> CTO All specs done, needs Marco's review <code>ready-for-dev</code> Marco Fully specced and approved, SWE can implement <code>needs-po-input</code> CTO CTO needs product clarification <code>needs-cto-input</code> PM PM needs technical assessment <code>blocked-technical</code> CTO Technical blocker identified"},{"location":"engineering/process/#escalation-labels-to-marco","title":"Escalation Labels (to Marco)","text":"Label Action Means <code>needs-founder-decision</code> \ud83d\udd14 Ping Marco Above agent authority \u2014 options + recommendation <code>needs-founder-approval</code> \ud83d\udd14 Ping Marco Both agents signed off, need go/no-go <code>founder-fyi</code> Silent Awareness only"},{"location":"engineering/process/#agent-roles","title":"Agent Roles","text":"Role Owns Transitions PM <code>brief.md</code>, acceptance criteria, prioritization <code>needs-spec</code> \u2192 <code>needs-ux</code> or <code>needs-tech-spec</code> CTO <code>tech-spec.md</code>, architecture decisions, PR review <code>needs-tech-spec</code> \u2192 <code>needs-review</code> UX Agent <code>ux.md</code>, interaction design, wireframes <code>needs-ux</code> \u2192 <code>needs-tech-spec</code> or <code>needs-review</code> Marco Founder decisions, approvals <code>needs-review</code> \u2192 <code>ready-for-dev</code> SWE Implementation, PRs <code>ready-for-dev</code> \u2192 done"},{"location":"engineering/process/#label-taxonomy","title":"Label Taxonomy","text":""},{"location":"engineering/process/#type","title":"Type","text":"<p><code>feature</code>, <code>bug</code>, <code>tech-debt</code>, <code>enhancement</code>, <code>adr</code></p>"},{"location":"engineering/process/#area","title":"Area","text":"<p><code>backend</code>, <code>frontend</code>, <code>api</code>, <code>cli</code>, <code>calendar</code>, <code>ai</code></p>"},{"location":"engineering/process/#size","title":"Size","text":"<p><code>size/S</code>, <code>size/M</code>, <code>size/L</code>, <code>size/XL</code></p>"},{"location":"engineering/process/#priority","title":"Priority","text":"<p><code>p0-critical</code>, <code>p1-high</code>, <code>p2-medium</code>, <code>p3-low</code></p>"},{"location":"engineering/process/#category","title":"Category","text":"<p><code>vision</code>, <code>bug</code>, <code>enhancement</code>, <code>epic</code></p>"},{"location":"engineering/process/#documentation-rules","title":"Documentation Rules","text":""},{"location":"engineering/process/#every-label-change-gets-a-comment","title":"Every label change gets a comment","text":"<p>Explain WHY the label changed and WHO needs to act next.</p>"},{"location":"engineering/process/#comment-signing","title":"Comment signing","text":"<p>All agents sign their comments:</p> <ul> <li><code>\u2014 PO Agent</code></li> <li><code>\u2014 CTO Agent</code></li> <li><code>\u2014 UX Agent</code></li> <li><code>\u2014 SWE Agent</code></li> </ul>"},{"location":"engineering/process/#specs-are-files-not-comments","title":"Specs are files, not comments","text":"<p>Tech specs, UX concepts, and briefs are files in the planning folder. Issue comments are transition signals only \u2014 one line linking the file. Never paste spec content into comments (it creates drift if the file changes).</p> <p>Good comment:</p> <pre><code>Tech spec written: `planning/companion/interface/tech-spec.md`\nRemoving `needs-tech-spec`, adding `needs-review`.\n\u2014 CTO Agent\n</code></pre> <p>Bad comment: Pasting the full tech spec into the issue.</p>"},{"location":"engineering/process/#acceptance-criteria-use-checkboxes","title":"Acceptance criteria use checkboxes","text":"<pre><code>## Acceptance Criteria\n- [ ] CompanionMemory model created with required fields\n- [ ] Migration generated and tested\n- [ ] Unit tests for model validation\n</code></pre> <p>When checking off criteria, comment what you did:</p> <pre><code>\u2705 Checked off \"Add companion memory model\"\n\u2014 Added CompanionMemory in companion/models.py with migration 0001.\n\u2014 SWE Agent\n</code></pre>"},{"location":"engineering/process/#epics","title":"Epics","text":"<p>Epics group related features. They're checklist issues \u2014 no specs or acceptance criteria of their own.</p> <pre><code>## [emoji] Epic Name\nWhy this matters \u2014 1-2 sentences.\n\n### Features\n- [ ] #XX \u2014 Feature Name (`current-label`)\n- [ ] #YY \u2014 Feature Name (`current-label`)\n- [x] #ZZ \u2014 Feature Name (`done`)\n</code></pre> <p>Max 2 active epics.</p>"},{"location":"engineering/process/#implementation-issues","title":"Implementation Issues","text":"<p>When a feature reaches <code>ready-for-dev</code>, implementation issues are created in <code>arc-eng/journeyloop</code> (the code repo):</p> <pre><code>**As a** [role],\n**I want** [goal]\n**so that** [value].\n\n## Acceptance Criteria\n- [ ] Testable condition (max 3 per issue \u2014 split if more)\n\n## Planning\nSee: `planning/&lt;project&gt;/&lt;feature&gt;/` in journeyloop-startup-assistant\n</code></pre>"},{"location":"engineering/process/#slack-channels","title":"Slack Channels","text":"Channel Purpose <code>#development</code> Short log entries for every completed task <code>#reviews</code> Review threads for specs and PRs <code>#scrum</code> Daily standups and sprint coordination"},{"location":"platform/","title":"Platform","text":"<p>Core documentation for the JourneyLoop platform \u2014 data model, coaching framework, and product overview.</p>"},{"location":"platform/overview/","title":"JourneyLoop \u2014 Platform Reference for Companion Agents","text":""},{"location":"platform/overview/#what-is-journeyloop","title":"What is JourneyLoop?","text":"<p>JourneyLoop is an AI-powered coaching companion platform for independent coaches. Its tagline: \"You hold space for everyone. But who holds space for you?\"</p> <p>The core premise: coaching is an isolated profession. JourneyLoop fixes that by acting as a companion to the coach \u2014 capturing every session, surfacing insights, reflecting growth, and preparing coaches for what's next. Coaches don't manually take notes or review transcripts. JourneyLoop handles that automatically.</p> <p>The product does three things: 1. Records and transcribes coaching sessions automatically (via Recall.ai bot joining Zoom/Meet/Teams) 2. Analyzes transcripts using the SHIFT framework \u2014 giving coaches structured feedback on their coaching quality 3. Tracks client progress across goals, milestones, and behavior patterns over time</p> <p>Coaches get AI-generated session notes, ICF-aligned coaching feedback, and cumulative client progress tracking \u2014 without any manual input.</p>"},{"location":"platform/overview/#core-data-model","title":"Core Data Model","text":""},{"location":"platform/overview/#coach-coachingprofile-authuser","title":"Coach (<code>CoachingProfile</code> \u2192 <code>auth.User</code>)","text":"<p>The primary user. Has a name, business name, coaching niche, and description. Owns all clients and sessions.</p>"},{"location":"platform/overview/#client-coachingclient","title":"Client (<code>CoachingClient</code>)","text":"<p>Belongs to one coach. Key fields: - <code>name</code>, <code>email</code> \u2014 identity - <code>total_sessions</code> \u2014 sessions in the coaching package (e.g., 6 or 12) - <code>actual_completed_sessions</code> \u2014 dynamic count (date \u2264 today, type = regular) - <code>sessions</code> \u2192 <code>CoachingSession</code> objects - <code>progress_goals</code> \u2192 <code>CoachingGoal</code> objects - <code>milestones</code> \u2192 <code>CoachingMilestone</code> objects - <code>has_consented</code> \u2014 client must consent before AI can process their transcripts - Optional client portal access (linked <code>auth.User</code>)</p>"},{"location":"platform/overview/#session-coachingsession","title":"Session (<code>CoachingSession</code>)","text":"<p>A single coaching meeting. Key fields: - <code>client</code> \u2014 FK to <code>CoachingClient</code> - <code>title</code>, <code>date</code>, <code>session_type</code> (<code>regular</code> or <code>intake</code> \u2014 intake doesn't count toward package total) - <code>transcript</code> \u2014 full text (deferred by default for performance; use <code>all_fields</code> manager when needed) - <code>transcript_json</code> \u2014 raw JSON from Recall.ai with timestamps - <code>meeting_url</code>, <code>recall_bot_id</code>, <code>recall_bot_status</code> \u2014 Recall.ai recording integration - <code>progress_extracted</code> \u2014 whether AI has processed this session - <code>is_completed</code> \u2014 property: <code>date &lt;= today</code></p>"},{"location":"platform/overview/#utterance-sessionutterance","title":"Utterance (<code>SessionUtterance</code>)","text":"<p>Individual speech segment from a transcript: - <code>speaker_type</code> \u2014 <code>coach</code> or <code>client</code> - <code>text_clean</code> \u2014 cleaned text - <code>sequence_number</code> \u2014 1-based ordering - <code>timestamp_min</code> / <code>timestamp_sec</code> \u2014 position in session</p>"},{"location":"platform/overview/#the-shift-framework","title":"The SHIFT Framework","text":"<p>SHIFT is JourneyLoop's proprietary coaching quality model, grounded in ICF competencies and evidence-based coaching research. After each session, AI analyzes the transcript against 5 principles, identifying moments where the coach applied them well (Excellence Signals) or missed an opportunity (Growth Opportunities).</p> <p>SHIFT = S\u00b7H\u00b7I\u00b7F\u00b7T</p>"},{"location":"platform/overview/#s-surface-emotion","title":"S \u2014 Surface Emotion","text":"<p>Notice, name, and validate client emotions when they arise.</p> <p>Patterns (what good looks like): - Label the Feeling \u2014 Coach reflects client's emotional language (\"That overwhelm sounds really heavy for you.\") - Ask About Emotion \u2014 Coach directly inquires about feelings (\"What feelings are coming up as you say that?\") - Affective Mirroring \u2014 Coach's tone matches client's emotional state</p> <p>Anti-patterns (missed opportunities): - Task-Switch after Emotion \u2014 Pivoting to tasks right after emotional disclosure - Emotion Avoidance \u2014 Ignoring or sidestepping emotional cues - Affect-Free Paraphrase \u2014 Paraphrasing content without reflecting the emotion</p>"},{"location":"platform/overview/#h-hand-back-ownership","title":"H \u2014 Hand Back Ownership","text":"<p>Return agency to the client. Let them define direction and next steps.</p> <p>Patterns: - Invite Decisions \u2014 Coach asks client to define their own solutions - Agency Language \u2014 Framing that emphasizes the client's choice (\"It's your choice which step you take first.\") - Curiosity over Advice \u2014 Using inquiry instead of giving answers</p> <p>Anti-patterns: - Preemptive Advice \u2014 Offering solutions before the client has a chance to find their own - Goal Takeover \u2014 Coach reshapes or restates the client's goals with their own agenda - Directed Solutions \u2014 Dictating what the client should do</p>"},{"location":"platform/overview/#i-illuminate-contradictions","title":"I \u2014 Illuminate Contradictions","text":"<p>Spot and reflect inconsistencies, limiting beliefs, or avoidance in the client's language.</p> <p>Patterns: - Name the Tension \u2014 Coach reflects contradictions in client statements (\"You say you want to take risks, yet uncertainty feels intolerable \u2014 how do those fit together?\") - Values-Behavior Check \u2014 Highlighting misalignment between stated values and actions - Invite the Disowned \u2014 Exploring topics the client is avoiding</p> <p>Anti-patterns: - Contradiction Blindness \u2014 Ignoring clear inconsistencies in the client's narrative - Comfort Detour \u2014 Sidestepping difficult or uncomfortable material - Reassure Instead of Explore \u2014 Soothing away contradictions rather than exploring them</p>"},{"location":"platform/overview/#f-find-the-pattern","title":"F \u2014 Find the Pattern","text":"<p>Name meaningful themes or behavioral loops visible within (and across) the session.</p> <p>Patterns: - Theme Detection \u2014 Identifying a recurring theme in the client's language - Name Core Driver \u2014 Identifying a deeper belief or value driving behavior - Reframe to Meta \u2014 Lifting the narrative to a higher pattern-based level</p> <p>Anti-patterns: - Surface Parroting \u2014 Repeating client words without deeper synthesis - Theme Avoidance \u2014 Ignoring recurring signals - Reactive Only \u2014 Responding moment-to-moment without connecting the dots</p>"},{"location":"platform/overview/#t-turn-insight-into-action","title":"T \u2014 Turn Insight into Action","text":"<p>Help the client translate reflection into clear, specific, committed next steps.</p> <p>Patterns: - Elicit Concrete Action \u2014 Asking the client to define their own next steps (\"What's one specific action you'll take this week?\") - Make It Measurable \u2014 Encouraging time-bound, specific commitments - Reflect Decisions Made \u2014 Consolidating commitments voiced during the session</p> <p>Anti-patterns: - No Next Step \u2014 Session ends without any explicit action - Insight-Only Closure \u2014 Celebrating insight but skipping action planning - Coach-Defined Action \u2014 Prescribing steps instead of eliciting them</p>"},{"location":"platform/overview/#ai-generated-session-content","title":"AI-Generated Session Content","text":"<p>When a transcript is uploaded, a <code>SessionContentRequest</code> processes four things asynchronously:</p> <ol> <li>Session Analysis (<code>CoachingSessionAnalysis</code>) \u2014 overall session summary, themes, key takeaways</li> <li>SHIFT Insights \u2014 <code>GrowthOpportunity</code> + <code>ExcellenceSignal</code> objects (each linked to specific utterances, with feedback to the coach, why it matters, and a better example)</li> <li>Progress \u2014 <code>SessionObservation</code> objects extracted from utterances, linked to goals and milestones with numeric delta impact</li> <li>Behavior Loops (<code>ClientLoop</code>) \u2014 recurring trigger-response-consequence patterns identified across sessions</li> </ol>"},{"location":"platform/overview/#progress-tracking","title":"Progress Tracking","text":""},{"location":"platform/overview/#goals-coachinggoal","title":"Goals (<code>CoachingGoal</code>)","text":"<p>Long-running objectives. Have a <code>slug</code> (unique per client, used for AI reference), <code>title</code>, <code>status</code> (<code>active</code>/<code>paused</code>/<code>complete</code>). Progress accumulates via <code>ObservationGoal</code> delta links (-0.10 to +0.10 per observation).</p>"},{"location":"platform/overview/#milestones-coachingmilestone","title":"Milestones (<code>CoachingMilestone</code>)","text":"<p>Date-driven events (e.g., \"Sales presentation on March 15th\"). Have <code>target_date</code>, <code>status</code> (<code>upcoming</code>/<code>completed</code>/<code>missed</code>).</p>"},{"location":"platform/overview/#observations-sessionobservation","title":"Observations (<code>SessionObservation</code>)","text":"<p>AI-extracted client moments. <code>stance</code> = <code>struggle</code>/<code>intent</code>/<code>plan</code>/<code>reflection</code>/<code>outcome</code>. Include valence (-1.0 to 1.0), intensity, and certainty scores. Linked to goals and milestones with delta impacts.</p>"},{"location":"platform/overview/#behavior-loops-clientloop","title":"Behavior Loops (<code>ClientLoop</code>)","text":"<p>Cross-session patterns: <code>trigger</code> \u2192 <code>response</code> \u2192 <code>consequence</code>. Status: <code>emerging</code>/<code>active</code>/<code>evolving</code>/<code>resolved</code>.</p>"},{"location":"platform/overview/#companion-api-apicompanionv1","title":"Companion API (<code>/api/companion/v1/</code>)","text":"<p>The agent's data access layer. Bearer token auth (<code>CompanionAPIKeyAuthentication</code>), scoped to the coach who owns the key.</p> Method Path Description <code>GET</code> <code>/clients/</code> List clients (id, name, email) <code>GET</code> <code>/clients/&lt;id&gt;/</code> Client detail with goals and milestones <code>GET</code> <code>/clients/search/?q=</code> Search clients by name <code>GET</code> <code>/clients/&lt;id&gt;/sessions/</code> All sessions for a client <code>GET</code> <code>/clients/&lt;id&gt;/goals/</code> List goals <code>POST</code> <code>/clients/&lt;id&gt;/goals/</code> Create a goal <code>PATCH</code> <code>/clients/&lt;id&gt;/goals/&lt;goal_id&gt;/</code> Update goal title or status <code>DELETE</code> <code>/clients/&lt;id&gt;/goals/&lt;goal_id&gt;/</code> Delete a goal <code>GET</code> <code>/sessions/upcoming/</code> Upcoming sessions (next 7 days) <code>GET</code> <code>/sessions/recent/?limit=N</code> Recent past sessions (default 10) <code>GET</code> <code>/sessions/&lt;id&gt;/</code> Session detail <code>GET</code> <code>/sessions/&lt;id&gt;/transcript/</code> Raw transcript text <code>PATCH</code> <code>/profile/</code> Update companion profile (e.g., set name)"},{"location":"platform/overview/#key-integrations","title":"Key Integrations","text":"<ul> <li>Recall.ai \u2014 recording bot that joins video calls, captures live transcript</li> <li>Google Calendar \u2014 auto-creates sessions from calendar events</li> <li>Stripe \u2014 coach subscription billing (Starter free, paid tiers for more clients)</li> <li>Client portal \u2014 clients can log in, view session takeaways, track their own progress</li> </ul>"}]}